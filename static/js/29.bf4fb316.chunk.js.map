{"version":3,"sources":["../node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js","jdcomponents/JobVacancies/AddJobVacancy.js"],"names":["DialogTitle","React","props","ref","children","classes","className","_props$disableTypogra","disableTypography","other","_objectWithoutProperties","_extends","clsx","root","Typography","component","variant","withStyles","margin","padding","flex","name","CREATE_USER","process","REACT_APP_KB_PORTAL_USER_FETCHADDETIALS","REACT_APP_KB_PORTAL_USER_CREATE","UPDATE_USER","REACT_APP_KB_PORTAL_USER_UPDATE","useStyles","makeStyles","theme","fab","spacing","form","display","flexDirection","width","formControl","marginTop","minWidth","formControlLabel","AddVacancy","useState","loadingRef","color","open","setOpen","Date","startDate","setStartDate","fullWidth","maxWidth","allRoles","setSubmitted","isSubmittedRef","setRolePermissions","username","email","firstName","lastName","userRole","userStatus","setJobGroupValuesErrors","userValuesErrorsRef","valueIntoModal","userValues","setJobGroupValues","userValuesRef","useEffect","a","action","current","permissions","validateValues","hasErrors","user","userErrors","Object","keys","map","key","undefined","console","log","prevValues","saveJobGroup","e","preventDefault","authorities","url","id","BackendService","postRequest","then","response","data","requestStatus","notifySuccess","message","notifyError","catch","error","resetBtn","handleClickOpen","handleClose","Fragment","content","trigger","positive","onClick","icon","disableBackdropClick","disableEscapeKeyDown","onClose","aria-labelledby","active","spinner","loading","Group","widths","Input","label","placeholder","Field","selected","onChange","date","showYearDropdown","showMonthYearDropdown","useShortMonthInDropdown","disabled","type","primary","defaultProps"],"mappings":"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","file":"static/js/29.bf4fb316.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    margin: 0,\n    padding: '16px 24px',\n    flex: '0 0 auto'\n  }\n};\nvar DialogTitle = /*#__PURE__*/React.forwardRef(function DialogTitle(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), disableTypography ? children : /*#__PURE__*/React.createElement(Typography, {\n    component: \"h2\",\n    variant: \"h6\"\n  }, children));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogTitle.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the children won't be wrapped by a typography component.\n   * For instance, this can be useful to render an h4 instead of the default h2.\n   */\n  disableTypography: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogTitle'\n})(DialogTitle);","import React, {useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport useState from 'react-usestateref';\nimport {Button, Form, Popup} from 'semantic-ui-react';\nimport Aux from '../../hoc/_Aux';\nimport BackendService from \"../../services/BackendService\";\nimport LoadingOverlay from 'react-loading-overlay'\nimport ClipLoader from \"react-spinners/PropagateLoader\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nconst FETCH_LDAP_DETAILS = process.env.REACT_APP_KB_PORTAL_USER_FETCHADDETIALS;\nconst CREATE_USER = process.env.REACT_APP_KB_PORTAL_USER_CREATE;\nconst UPDATE_USER = process.env.REACT_APP_KB_PORTAL_USER_UPDATE;\n\n\nconst useStyles = makeStyles((theme) => ({\n    fab: {\n        margin: theme.spacing(1)\n    },\n    form: {\n        display: 'flex',\n        flexDirection: 'column',\n        margin: 'auto',\n        width: 'fit-content'\n    },\n    formControl: {\n        marginTop: theme.spacing(2),\n        minWidth: 120\n    },\n    formControlLabel: {\n        marginTop: theme.spacing(1)\n    }\n}));\n\nconst AddVacancy = (props) => {\n    const classes = useStyles();\n    const [loading, setLoading, loadingRef] = useState(false);\n    const [color, setColor] = useState(\"#60991f\");\n    const [open, setOpen] = useState(false);\n    const [startDate, setStartDate] = useState(new Date());\n    const [mounted, setMount] = useState(false);\n    const [fullWidth, setFullWidth] = useState(true);\n    const [maxWidth, setMaxWidth] = useState('sm');\n    const [allRoles, setAllRoles, allRolesref] = useState(props?.allRoles);\n    const [isSubmitted, setSubmitted, isSubmittedRef] = useState(false);\n    const [rolePermissions, setRolePermissions, rolePermissionsRef] = useState([]);\n    const [userValuesErrors, setJobGroupValuesErrors, userValuesErrorsRef] = useState({\n        username: '',\n        email: '',\n        firstName: '',\n        lastName: '',\n        userRole: '',\n        userStatus: ''\n    });\n    const [userValues, setJobGroupValues, userValuesRef] = useState(props?.valueIntoModal);\n    useEffect(() => {\n        (async function () {\n            if (props.action === 'edit') {\n                setRolePermissions(userValuesRef.current?.userRole.permissions);\n            }\n\n        })();\n    }, [userValues]);\n\n    const changeHandler = (e) => {\n        setJobGroupValues((prevValues) => {\n            return {...prevValues, [e.target.name]: e.target.value};\n        });\n    };\n    const updateJobGroupValues = (name, value) => {\n        setJobGroupValues((prevValues) => {\n            return {...prevValues, [name]: value};\n        });\n    };\n    const validateValues = () => {\n        let hasErrors = false;\n\n        const user = userValuesRef.current;\n        const userErrors = userValuesErrorsRef.current;\n        setJobGroupValuesErrors({\n            username: '',\n            email: '',\n            firstName: '',\n            lastName: '',\n            userRole: '',\n            userStatus: ''\n        });\n        Object.keys(userErrors).map((key) => {\n            if (user[key] === null || user[key] === '' || user[key] === undefined) {\n                console.log(key + ' key and value is ' + user[key]);\n                setJobGroupValuesErrors((prevValues) => {\n                    return {...prevValues, [key]: key + ' is required'};\n                });\n                hasErrors = true\n                ;\n            }\n        });\n\n        return hasErrors;\n    }\n    const saveJobGroup = async (e) => {\n        e.preventDefault();\n        setSubmitted(true);\n        const hasErrors = validateValues();\n        if (!hasErrors) {\n            delete userValuesRef.current?.authorities;\n            const url = props.action === 'add' ? CREATE_USER : UPDATE_USER + '/' + userValuesRef.current?.id;\n            await BackendService.postRequest(url, userValuesRef.current)\n                .then((response) => {\n                    const data = response.data;\n\n                    if (data?.requestStatus) {\n                        BackendService.notifySuccess(data.message);\n\n                    } else {\n                        BackendService.notifyError(data.message);\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                    BackendService.notifyError('Oops... Something went wrong!!!');\n                });\n            resetBtn(e);\n        }\n    };\n\n\n    const resetBtn = async () => {\n        setSubmitted(false);\n        setRolePermissions([]);\n        setJobGroupValues({\n            username: '',\n            email: '',\n            firstName: '',\n            lastName: '',\n            userRole: '',\n            userStatus: ''\n        });\n        setJobGroupValuesErrors({\n            username: '',\n            email: '',\n            firstName: '',\n            lastName: '',\n            userRole: '',\n            userStatus: ''\n        });\n    };\n\n    const fetchADDetails = async () => {\n        const userName = userValuesRef.current.username;\n        try {\n            const response = await BackendService.getRequest(\n                FETCH_LDAP_DETAILS + '?username=' + userName\n            );\n            const data = JSON.parse(response.data?.payload);\n            const username = data?.accountname;\n            updateJobGroupValues('username', username);\n\n            const firstname = data?.firstname;\n            updateJobGroupValues('firstName', firstname);\n\n            const email = data?.email;\n            updateJobGroupValues('email', email);\n\n            const lastname = data?.lastname;\n            updateJobGroupValues('lastName', lastname);\n\n            console.log('userValuesRef==' + JSON.stringify(userValuesRef.current));\n        } catch (e) {\n            console.error(e);\n        }\n    };\n\n    const handleRoleChange = async (e, {value}) => {\n        setRolePermissions(JSON.parse(value)?.permissions);\n        updateJobGroupValues('userRole', JSON.parse(value));\n    };\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const stringToHash = (string) => {\n        var hash = 0;\n        if (string.length == 0) return hash;\n        for (let i = 0; i < string.length; i++) {\n            let char = string.charCodeAt(i);\n            hash = ((hash << 5) - hash) + char;\n            hash = hash & hash;\n        }\n        return hash;\n    }\n\n\n    return (\n        <Aux>\n            <React.Fragment>\n                <Popup\n                    content={props?.action === 'add' ? \"Add Job Vacancy\" : \"Edit Job Vacancy\"}\n                    trigger={\n                        (props?.action === 'add'\n                            ? (<Button positive onClick={handleClickOpen} icon=\"add\"/>)\n                            : (<Button onClick={handleClickOpen} icon=\"edit\"/>))\n                    }\n                />\n\n                <Dialog\n                    disableBackdropClick\n                    disableEscapeKeyDown\n                    fullWidth={fullWidth}\n                    maxWidth={maxWidth}\n                    open={open}\n                    onClose={handleClose}\n                    aria-labelledby=\"max-width-dialog-title\"\n                ><LoadingOverlay\n                    active={loadingRef.current}\n                    spinner={<ClipLoader color={color} loading={loadingRef.current}/>}\n                >\n                    <DialogTitle\n                        id=\"max-width-dialog-title\">{props?.action === 'add' ? \"Add Job Vacancy\" : \"Edit Job Vacancy\"}</DialogTitle>\n                    <DialogContent>\n                        <Form>\n                            <Form.Group widths='equal'>\n                                <Form.Input\n                                    label=\"Job Position\"\n                                    placeholder=\"Job Position\"\n                                    name=\"groupname\"\n                                />\n                            </Form.Group>\n                            <Form.Group widths='equal'>\n                                <Form.Input\n                                    label=\"Openings Available\"\n                                    placeholder=\"Openings Available\"\n                                    name=\"jobgroupdescription\"\n                                />\n                                <Form.Field>\n                                    Deadline <br/>\n                                    <DatePicker\n                                        selected={startDate}\n                                        onChange={(date) => setStartDate(date)}\n                                        showYearDropdown\n                                        showMonthYearDropdown\n                                        useShortMonthInDropdown\n                                    />\n                                </Form.Field>\n                            </Form.Group>\n                            <Form.Group widths='equal'>\n                                <Form.Input\n                                    label=\"Town\"\n                                    placeholder=\"Town\"\n                                    name=\"MinSalary\"\n                                />\n                                <Form.Input\n                                    label=\"Status\"\n                                    placeholder=\"Status\"\n                                    name=\"MaxSalary\"\n                                />\n                            </Form.Group>\n\n                        </Form>\n\n                    </DialogContent>\n                    <DialogActions>\n                        <Button.Group>\n                            <Button\n                                disabled={isSubmittedRef.current}\n                                type=\"submit\"\n                                onClick={saveJobGroup}\n                                positive\n                            >\n                                Save\n                            </Button>\n                            <Button onClick={resetBtn}>Reset</Button>\n                            <Button onClick={handleClose} primary>\n                                Close\n                            </Button>\n                        </Button.Group>\n                    </DialogActions>\n                </LoadingOverlay>\n                </Dialog>\n            </React.Fragment>\n        </Aux>\n    );\n};\nAddVacancy.propTypes = {\n    modalOpen: PropTypes.bool.isRequired,\n    action: PropTypes.string.isRequired,\n    valueIntoModal: PropTypes.object.isRequired,\n    allRoles: PropTypes.array.isRequired,\n};\n\nAddVacancy.defaultProps = {};\n\nexport default AddVacancy;\n"],"sourceRoot":""}